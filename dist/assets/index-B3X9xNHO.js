(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();const F={views:{main:{hash:"#main",file:"/interfaces/main/main.html",title:"Inicio"},login:{hash:"#login",file:"/interfaces/login/login.html",title:"Inicio de sesión",hideNavbar:!0},testing:{hash:"#testing",file:"/interfaces/testing/testing.html",title:"Zona de pruebas"},news:{hash:"#news",file:"/interfaces/news/news.html",title:"Noticias"},notFound:{hash:"#not-found",file:"/interfaces/not-found/not-found.html",title:"Página no encontrada",hideNavbar:!0},profile:{hash:"#profile",file:"/interfaces/profile/profile.html",title:"Perfil"},academicCalendar:{hash:"#academic-calendar",file:"/interfaces/academic/academic-calendar/academic-calendar.html",title:"Calendario Académico"},system:{users:{hash:"#system-users",file:"/interfaces/system/users/users.html",title:"Usuarios"},roles:{hash:"#system-roles",file:"/interfaces/system/roles/roles.html",title:"Roles"},codes:{hash:"#system-codes",file:"/interfaces/system/codes/codes.html",title:"Códigos"},audit:{hash:"#system-audit",file:"/interfaces/system/audit/audit.html",title:"Auditoría"}},planification:{university:{hash:"#planification-university",file:"/interfaces/planification/university/university.html",title:"Universidad"},localities:{hash:"#planification-localities",file:"/interfaces/planification/localities/localities.html",title:"Localidades"},faculties:{hash:"#planification-faculties",file:"/interfaces/planification/faculties/faculties.html",title:"Facultades"},departments:{hash:"#planification-departments",file:"/interfaces/planification/departments/departments.html",title:"Departamentos"},careers:{hash:"#planification-careers",file:"/interfaces/planification/careers/careers.html",title:"Carreras"},pensums:{hash:"#planification-pensums",file:"/interfaces/planification/pensums/pensums.html",title:"Pensums"},subjects:{hash:"#planification-subjects",file:"/interfaces/planification/subjects/subjects.html",title:"Materias"},cycles:{hash:"#planification-cycles",file:"/interfaces/planification/cycles/cycles.html",title:"Ciclos Académicos"},dates:{hash:"#planification-dates",file:"/interfaces/planification/academic-dates/academic-dates.html",title:"Fechas Académicas"},modalities:{hash:"#planification-modalities",file:"/interfaces/planification/modalities/modalities.html",title:"Modalidades"},degrees:{hash:"#planification-degrees",file:"/interfaces/planification/degrees/degrees.html",title:"Grados Académicos"},titles:{hash:"#planification-titles",file:"/interfaces/planification/titles/titles.html",title:"Títulos Académicos"},service:{hash:"#planification-service",file:"/interfaces/planification/social-service/social-service.html",title:"Servicio Social"},documents:{hash:"#planification-documents",file:"/interfaces/planification/documents/documents.html",title:"Documentos"},evaluationInstruments:{hash:"#planification-evaluation-instruments",file:"/interfaces/planification/evaluation-instruments/evaluation-instruments.html",title:"Instrumentos de Evaluación"}},humanResources:{employees:{hash:"#hr-employees",file:"/interfaces/human-resources/employees/employees.html",title:"Gestión de empleados"}},academicRecords:{students:{hash:"#ar-students",file:"/interfaces/academic-records/students/students.html",title:"Gestión de estudiantes"},careerEnrollments:{hash:"#ar-career-enrollments",file:"/interfaces/academic-records/career-enrollments/career-enrollments.html",title:"Inscripción a carreras"},cycleEnrollments:{hash:"#ar-cycle-enrollments",file:"/interfaces/academic-records/cycle-enrollments/cycle-enrollments.html",title:"Inscripción a ciclos"},courseEnrollments:{hash:"#ar-course-enrollments",file:"/interfaces/academic-records/course-enrollments/course-enrollments.html",title:"Inscripción a clases"},studentPerformance:{hash:"#ar-student-performance",file:"/interfaces/academic-records/student-performance/student-performance.html",title:"Desempeño de estudiantes"}},studentPortal:{enrollmentsCourses:{hash:"#sp-enrollments-courses",file:"/interfaces/student-portal/enrollments/courses/courses.html",title:"Inscripción de materias"},enrollmentsCycles:{hash:"#sp-enrollments-cycles",file:"/interfaces/student-portal/enrollments/cycles/cycles.html",title:"Inscripción a ciclos"},grades:{hash:"#sp-grades",file:"/interfaces/student-portal/grades/grades.html",title:"Notas parciales"},pensum:{hash:"#sp-pensum",file:"/interfaces/student-portal/pensum/pensum.html",title:"Pensum"},evaluations:{hash:"#sp-evaluations",file:"/interfaces/student-portal/evaluations/evaluations.html",title:"Evaluaciones"}},teacherPortal:{courses:{hash:"#tp-courses",file:"/interfaces/teacher-portal/courses/courses.html",title:"Materias"},evaluationPlans:{hash:"#tp-evaluation-plans",file:"/interfaces/teacher-portal/evaluation-plans/evaluation-plans.html",title:"Planes de evaluación"},evaluations:{hash:"#tp-evaluations",file:"/interfaces/teacher-portal/evaluations/evaluations.html",title:"Ingreso de notas"},schedules:{hash:"#tp-schedules",file:"/interfaces/teacher-portal/schedules/schedules.html",title:"Horarios"}}},components:{layout:{body:{js:"/components/layout/body/body.js"},footer:{js:"/components/layout/footer/footer.js"},navbar:{js:"/components/layout/navbar/navbar.js"}},overlay:{toast:{js:"/components/overlay/toast/toast.js"}}}},z=(()=>{const m=l=>l.replace(/([A-Z])/g,"-$1").toLowerCase(),e=[{name:"indigo-blue",light:{bodyFrom:"224, 231, 255",bodyTo:"219, 234, 254",cardFrom:"238, 242, 255",cardTo:"239, 246, 255",textFrom:"129, 140, 248",textTo:"96, 165, 250",buttonFrom:"129, 140, 248",buttonTo:"96, 165, 250",buttonText:"255, 255, 255",placeholderFrom:"165, 180, 252",placeholderTo:"147, 197, 253",offFrom:"199, 210, 254",offTo:"191, 219, 254"},dark:{bodyFrom:"38, 38, 38",bodyTo:"64, 64, 64",cardFrom:"31, 31, 31",cardTo:"38, 38, 38",textFrom:"229, 231, 235",textTo:"209, 213, 219",buttonFrom:"129, 140, 248",buttonTo:"96, 165, 250",buttonText:"255, 255, 255",placeholderFrom:"165, 180, 252",placeholderTo:"147, 197, 253",offFrom:"129, 140, 248",offTo:"96, 165, 250"}},{name:"green-lime",light:{bodyFrom:"240, 253, 244",bodyTo:"247, 254, 231",cardFrom:"245, 252, 245",cardTo:"252, 255, 231",textFrom:"34, 197, 94",textTo:"132, 204, 22",buttonFrom:"34, 197, 94",buttonTo:"132, 204, 22",buttonText:"255, 255, 255",placeholderFrom:"134, 239, 172",placeholderTo:"190, 242, 112",offFrom:"167, 243, 152",offTo:"217, 249, 157"},dark:{bodyFrom:"30, 30, 30",bodyTo:"50, 50, 50",cardFrom:"22, 22, 22",cardTo:"30, 30, 30",textFrom:"229, 231, 235",textTo:"209, 213, 219",buttonFrom:"34, 197, 94",buttonTo:"132, 204, 22",buttonText:"255, 255, 255",placeholderFrom:"134, 239, 172",placeholderTo:"190, 242, 112",offFrom:"34, 197, 94",offTo:"132, 204, 22"}},{name:"red-orange",light:{bodyFrom:"255, 241, 241",bodyTo:"255, 247, 237",cardFrom:"255, 245, 245",cardTo:"255, 249, 240",textFrom:"248, 113, 113",textTo:"249, 115, 22",buttonFrom:"248, 113, 113",buttonTo:"249, 115, 22",buttonText:"255, 255, 255",placeholderFrom:"252, 165, 165",placeholderTo:"253, 186, 116",offFrom:"254, 202, 202",offTo:"254, 215, 170"},dark:{bodyFrom:"32, 32, 32",bodyTo:"54, 54, 54",cardFrom:"20, 20, 20",cardTo:"30, 30, 30",textFrom:"229, 231, 235",textTo:"209, 213, 219",buttonFrom:"248, 113, 113",buttonTo:"249, 115, 22",buttonText:"255, 255, 255",placeholderFrom:"252, 165, 165",placeholderTo:"253, 186, 116",offFrom:"248, 113, 113",offTo:"249, 115, 22"}},{name:"teal-yellow",light:{bodyFrom:"236, 254, 250",bodyTo:"255, 251, 235",cardFrom:"245, 254, 251",cardTo:"255, 253, 236",textFrom:"20, 184, 166",textTo:"234, 179, 8",buttonFrom:"20, 184, 166",buttonTo:"234, 179, 8",buttonText:"255, 255, 255",placeholderFrom:"99, 211, 199",placeholderTo:"253, 224, 71",offFrom:"153, 230, 217",offTo:"253, 230, 138"},dark:{bodyFrom:"34, 34, 34",bodyTo:"60, 60, 60",cardFrom:"28, 28, 28",cardTo:"34, 34, 34",textFrom:"229, 231, 235",textTo:"209, 213, 219",buttonFrom:"20, 184, 166",buttonTo:"234, 179, 8",buttonText:"255, 255, 255",placeholderFrom:"99, 211, 199",placeholderTo:"253, 224, 71",offFrom:"20, 184, 166",offTo:"234, 179, 8"}},{name:"blue-cyan",light:{bodyFrom:"239, 246, 255",bodyTo:"236, 254, 255",cardFrom:"243, 248, 255",cardTo:"240, 254, 255",textFrom:"96, 165, 250",textTo:"34, 211, 238",buttonFrom:"96, 165, 250",buttonTo:"34, 211, 238",buttonText:"255, 255, 255",placeholderFrom:"147, 197, 253",placeholderTo:"125, 211, 252",offFrom:"191, 219, 254",offTo:"165, 243, 252"},dark:{bodyFrom:"30, 30, 30",bodyTo:"58, 58, 58",cardFrom:"20, 20, 20",cardTo:"30, 30, 30",textFrom:"229, 231, 235",textTo:"209, 213, 219",buttonFrom:"96, 165, 250",buttonTo:"34, 211, 238",buttonText:"255, 255, 255",placeholderFrom:"147, 197, 253",placeholderTo:"125, 211, 252",offFrom:"96, 165, 250",offTo:"34, 211, 238"}},{name:"fuchsia-pink",light:{bodyFrom:"245, 230, 240",bodyTo:"245, 230, 240",cardFrom:"248, 238, 243",cardTo:"248, 238, 243",textFrom:"192, 61, 209",textTo:"219, 39, 119",buttonFrom:"192, 61, 209",buttonTo:"219, 39, 119",buttonText:"255, 255, 255",placeholderFrom:"207, 120, 224",placeholderTo:"229, 107, 166",offFrom:"228, 140, 245",offTo:"238, 165, 200"},dark:{bodyFrom:"38, 38, 38",bodyTo:"64, 64, 64",cardFrom:"31, 31, 31",cardTo:"38, 38, 38",textFrom:"255, 255, 255",textTo:"243, 244, 246",buttonFrom:"232, 121, 249",buttonTo:"244, 114, 182",buttonText:"255, 255, 255",placeholderFrom:"240, 171, 252",placeholderTo:"249, 168, 212",offFrom:"244, 185, 255",offTo:"251, 207, 232"}}],t="app_theme_v1";let r={palette:e[0].name,mode:"light"};function n(l,u="light"){const d=e.find(N=>N.name===l);if(!d)return console.error("[THEME] palette not found:",l),!1;const P=d[u]??d.light;return Object.entries(P).forEach(([N,C])=>{const O=`--${m(N)}`;document.documentElement.style.setProperty(O,C)}),u==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),r={palette:l,mode:u},!0}function a(l=r.palette,u=r.mode){const d={palette:l,mode:u};localStorage.setItem(t,JSON.stringify(d))}function s(){const l=localStorage.getItem(t);if(!l)return n(r.palette,r.mode),r;try{const u=JSON.parse(l);return n(u.palette,u.mode)&&(r={palette:u.palette,mode:u.mode}),r}catch{return console.warn("[THEME] invalid stored theme, resetting to default"),n(r.palette,r.mode),r}}function i(l,u="light",d=!0){return n(l,u)?(d&&a(l,u),!0):!1}function o(){return e.map(l=>({name:l.name}))}function c(){return Object.assign({},r)}return{palettes:e,applyPalette:n,setTheme:i,loadTheme:s,saveTheme:a,getPalettes:o,getCurrent:c}})(),j="https://sapientiae-api-bd9a54b3d7a1.herokuapp.com/api",D={request:[],response:[],error:[]};class g{static get(e){return this._request({method:"GET",...e})}static post(e){return this._request({method:"POST",...e})}static put(e){return this._request({method:"PUT",...e})}static patch(e){return this._request({method:"PATCH",...e})}static delete(e){return this._request({method:"DELETE",...e})}static async _request(e){console.info("[Network] Network request:",{path:e.path,method:e.method||"GET",includeCredentials:e.includeCredentials,credentials:e.includeCredentials?"include":"omit",hasBody:!!e.body});const{path:t,method:r="GET",body:n=null,includeCredentials:a=!0,headers:s={}}=e;let i=`${j}${t}`;console.info(`[Network] Full URL: ${i}`);let o={method:r,headers:{"Content-Type":"application/json",...s},credentials:a?"include":"omit"};console.info("[Network] Request options:",{method:o.method,credentials:o.credentials,headers:o.headers}),n&&(o.body=JSON.stringify(n));for(const u of D.request){const d=await u({url:i,options:o});d&&({url:i,options:o}=d)}console.info("[Network] Making fetch request... 🤔");const c=await fetch(i,o);if(console.info("[Network] Response status:",c.status,c.statusText),console.info("[Network] Response headers:"),c.headers.forEach((u,d)=>{console.info(`[Network] ${d}: ${u}`)}),console.info("[Network] Set-Cookie header:",c.headers.get("Set-Cookie")),!c.ok){let u=await this._buildError(c);for(const d of D.error)u=await d(u)||u;throw u}let l=await c.json();for(const u of D.response)l=await u(l)||l;return console.info("[Network] Request successful"),l}static async _buildError(e){const t=await e.json().catch(()=>({}));return{status:e.status,message:t.message||e.statusText,details:Array.isArray(t.errors)?t.errors:typeof t.errors=="object"?Object.values(t.errors).flat():[]}}static get interceptors(){return D}}class E extends Error{constructor(e,t,r={}){super(`[${e}] ${t}`),this.name="ServiceError",this.serviceName=e,this.details=r,this.timestamp=new Date().toISOString(),Error.captureStackTrace&&Error.captureStackTrace(this,E)}}class I extends E{constructor(e,t,r,n){super(e,`Network error: ${r} ${n}`,{endpoint:t,status:r,statusText:n,type:"network"}),this.name="ServiceNetworkError",this.endpoint=t,this.status=r}}class $ extends E{constructor(e,t,r,n){super(e,`Validation failed for endpoint: ${t}`,{endpoint:t,validationErrors:r,inputData:$._sanitizeData(n),type:"validation"}),this.name="ServiceValidationError",this.validationErrors=r}static _sanitizeData(e){if(!e||typeof e!="object")return e;const t={...e};return t.password&&(t.password="***"),t.token&&(t.token="***"),t.email&&(t.email="***@***.***"),t}}class H extends E{constructor(e,t){super(e,`Authentication failed for endpoint: ${t}`,{endpoint:t,type:"authentication"}),this.name="ServiceAuthenticationError"}}class q{static baseEndpoint="";static contract=null;static async get(e="",t=null,r=null,n=null){try{const a=this._buildPath(e,t?.id),s=await g.get({path:a,includeCredentials:!0});console.log(s);const i=this._parseResult(s,n);return this._dispatchEvent("get",i),i}catch(a){throw this._wrapError(a,e,"GET")}}static async post(e="",t=null,r=null,n=null){try{const a=this._buildPath(e),s=this.contract&&t?this.contract.parse(t,r):t,i=await g.post({path:a,body:s,includeCredentials:!0}),o=this._parseResult(i,n);return this._dispatchEvent("post",o),o}catch(a){throw a.name==="ValidationError"?new $(this.name,e,a.details,t):this._wrapError(a,e,"POST")}}static async put(e="",t=null,r=null,n=null){try{const a=this._buildPath(e,t?.id),s=this.contract&&t?this.contract.parse(t,r):t,i=await g.put({path:a,body:s,includeCredentials:!0}),o=this._parseResult(i,n);return this._dispatchEvent("put",o),o}catch(a){throw a.name==="ValidationError"?new $(this.name,e,a.details,t):this._wrapError(a,e,"PUT")}}static async delete(e="",t=null,r=null){try{const n=this._buildPath(e,t),a=await g.delete({path:n,includeCredentials:!0}),s=this._parseResult(a,r);return this._dispatchEvent("delete",{id:t,result:s}),s}catch(n){throw this._wrapError(n,e,"DELETE")}}static async getRaw(e="",t=null){try{const r=this._buildPath(e,t?.id),n=await g.get({path:r,includeCredentials:!0});return this._dispatchEvent("get",n),n}catch(r){throw this._wrapError(r,e,"GET")}}static async postRaw(e="",t=null,r=null){try{const n=this._buildPath(e),a=this.contract&&t?this.contract.parse(t,r):t,s=await g.post({path:n,body:a,includeCredentials:!0});return this._dispatchEvent("post",s),s}catch(n){throw n.name==="ValidationError"?new $(this.name,e,n.details,t):this._wrapError(n,e,"POST")}}static async putRaw(e="",t=null,r=null){try{const n=this._buildPath(e,t?.id),a=this.contract&&t?this.contract.parse(t,r):t,s=await g.put({path:n,body:a,includeCredentials:!0});return this._dispatchEvent("put",s),s}catch(n){throw n.name==="ValidationError"?new $(this.name,e,n.details,t):this._wrapError(n,e,"PUT")}}static async deleteRaw(e="",t=null){try{const r=this._buildPath(e,t),n=await g.delete({path:r,includeCredentials:!0});return this._dispatchEvent("delete",{id:t,result:n}),n}catch(r){throw this._wrapError(r,e,"DELETE")}}static _buildPath(e,t=null){let r=`${this.baseEndpoint}`;return e&&(r+=`/${e}`),t&&(r+=`/${t}`),r}static _parseResult(e,t){if(!this.contract||!e)return e;try{return Array.isArray(e)?e.map(r=>this.contract.parse(r,t)):this.contract.parse(e,t)}catch(r){return console.warn(`Contract parsing failed for ${this.name}, returning raw data:`,r),e}}static _dispatchEvent(e,t){document.dispatchEvent(new CustomEvent(`${this.name}:${e}`,{detail:t}))}static _wrapError(e,t,r){return e instanceof E?e:e.status===401||e.status===403?new H(this.name,t):e.status?new I(this.name,t,e.status,e.message||"Unknown error"):new E(this.name,`Network request failed: ${e.message}`,{endpoint:t,method:r,originalError:e.message})}}class M extends Error{constructor(e){super("Validation failed"),this.name="ValidationError",this.details=e}}class _ extends Error{constructor(e){super(`Scope "${e}" is not defined in contract`),this.name="ContractScopeError",this.scope=e}}class y extends Error{constructor(e,t,r={},n=null){const a=this._safeStringify(t),s=this._safeStringify(r),i=`Pipe "${e}" failed to parse value ${a} with options: ${s}`;super(i),this.name="PipeParseError",this.pipeName=e,this.value=t,this.options=r,this.originalError=n,Error.captureStackTrace&&Error.captureStackTrace(this,y)}_safeStringify(e){try{if(typeof e=="string")return`"${e}"`;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e===null)return"null";if(e===void 0)return"undefined";const t=JSON.stringify(e);return t.length>100?t.substring(0,100)+"...":t}catch{return"[Complex Object]"}}}class w extends y{constructor(e,t={},r=null){super("StringPipe",e,t,r),this.name="StringPipeParseError"}}class R{static humanize(e,t={}){try{if(e==null)return t.default||"";let r=String(e);return t.trim&&(r=r.trim()),t.capitalize==="first"?r=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():t.capitalize==="words"?r=r.replace(/\w\S*/g,n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()):t.capitalize==="all"?r=r.toUpperCase():t.capitalize==="none"&&(r=r.toLowerCase()),t.maxLength&&r.length>t.maxLength&&(r=r.substring(0,t.maxLength)+(t.ellipsis||"...")),t.padStart&&(r=r.padStart(t.padStart.length,t.padStart.char||" ")),t.padEnd&&(r=r.padEnd(t.padEnd.length,t.padEnd.char||" ")),r}catch(r){throw r instanceof w?r:new w(e,t,r)}}static normalize(e,t={}){try{if(e==null)return t.default||"";let r=String(e);if(t.trim&&(r=r.trim()),t.lowercase?r=r.toLowerCase():t.uppercase&&(r=r.toUpperCase()),t.minLength&&r.length<t.minLength)if(t.padEnd)r=r.padEnd(t.minLength,t.padEnd.char||" ");else throw new w(e,t,new Error(`String too short: minimum ${t.minLength} characters`));if(t.maxLength&&r.length>t.maxLength)if(t.truncate)r=r.substring(0,t.maxLength);else throw new w(e,t,new Error(`String too long: maximum ${t.maxLength} characters`));if(t.regex&&!t.regex.test(r))throw new w(e,t,new Error("String does not match required pattern"));if(t.enum&&!t.enum.includes(r))throw new w(e,t,new Error(`String not in allowed values: ${t.enum.join(", ")}`));return r}catch(r){throw r instanceof w?r:new w(e,t,r)}}}class T extends y{constructor(e,t={},r=null){super("NumberPipe",e,t,r),this.name="NumberPipeParseError"}}class Y{static humanize(e,t={}){try{if(e==null)return t.default||"";const r=Number(e);return isNaN(r)?t.default||"":r.toLocaleString(t.locale||"en-US",{minimumFractionDigits:t.minFractionDigits||0,maximumFractionDigits:t.maxFractionDigits||2,style:t.currency?"currency":void 0,currency:t.currency})}catch(r){throw r instanceof T?r:new T(e,t,r)}}static normalize(e,t={}){try{if(e==null)return t.default||0;typeof e=="string"&&(e=e.replace(/[^\d.-]/g,""));const r=Number(e);if(isNaN(r))throw new T(e,t,new Error("Invalid number"));if(t.min!==void 0&&r<t.min){if(t.clamp)return t.min;throw new T(e,t,new Error(`Number below minimum: ${t.min}`))}if(t.max!==void 0&&r>t.max){if(t.clamp)return t.max;throw new T(e,t,new Error(`Number above maximum: ${t.max}`))}return r}catch(r){throw r instanceof T?r:new T(e,t,r)}}}class p extends y{constructor(e,t={},r=null){super("BooleanPipe",e,t,r),this.name="BooleanPipeParseError"}}class U{static humanize(e,t={}){try{if(e==null)return t.default||"";const r=this._normalizeToBoolean(e,t);return t.format==="yesno"?r?t.yesText||"Sí":t.noText||"No":t.format==="onoff"?r?t.onText||"On":t.offText||"Off":t.format==="yn"?r?t.yesText||"Y":t.noText||"N":t.format==="sn"?r?t.yesText||"S":t.noText||"N":t.format==="10"?r?"1":"0":t.format==="custom"&&t.truthy!==void 0?r?t.truthy:t.falsy:t.format==="boolean"?r?"true":"false":r.toString()}catch(r){throw r instanceof p?r:new p(e,t,r)}}static normalize(e,t={}){try{if(e==null){const n=t.default!==void 0?t.default:!1;return this._booleanToNumber(n)}const r=this._normalizeToBoolean(e,t);return this._booleanToNumber(r)}catch(r){throw r instanceof p?r:new p(e,t,r)}}static _normalizeToBoolean(e,t={}){if(typeof e=="boolean")return e;if(typeof e=="number"){if(e===1)return!0;if(e===0)return!1;throw new p(e,t,new Error(`Invalid number for boolean: ${e}. Must be 1 or 0.`))}if(typeof e=="string"){const r=e.trim().toLowerCase();if(["true","t","yes","y","sí","s","on","1","verdadero","v"].includes(r))return!0;if(["false","f","no","n","off","0","falso","f"].includes(r))return!1;throw new p(e,t,new Error(`Invalid string for boolean: "${e}". Must be one of: true/false, yes/no, y/n, s/n, on/off, 1/0`))}if(e===1)return!0;if(e===0)return!1;throw new p(e,t,new Error(`Unsupported type for boolean: ${typeof e}`))}static _booleanToNumber(e){return e?1:0}static fromDatabase(e,t={}){try{return e===1?!0:e===0?!1:this._normalizeToBoolean(e,t)}catch(r){throw r instanceof p?r:new p(e,t,r)}}static toDatabase(e){return this._booleanToNumber(e)}}class b extends y{constructor(e,t={},r=null){super("DatePipe",e,t,r),this.name="DatePipeParseError"}}class V{static humanize(e,t={}){try{if(e==null)return t.default||"";let r;if(e instanceof Date)r=e;else if(typeof e=="number")r=new Date(e<1e12?e*1e3:e);else if(typeof e=="string")r=new Date(e);else return t.default||"";if(isNaN(r.getTime()))throw new b(e,t,new Error("Invalid date"));switch(t.format||"medium"){case"short":return r.toLocaleDateString(t.locale||"en-US");case"medium":return r.toLocaleDateString(t.locale||"en-US",{year:"numeric",month:"short",day:"numeric"});case"long":return r.toLocaleDateString(t.locale||"en-US",{year:"numeric",month:"long",day:"numeric"});case"datetime":return r.toLocaleString(t.locale||"en-US");case"relative":return this._relativeTime(r,t);case"custom":return this._formatCustom(r,t.pattern);default:return r.toISOString().split("T")[0]}}catch(r){throw r instanceof b?r:new b(e,t,r)}}static normalize(e,t={}){try{if(e==null)return t.default||new Date().toISOString();if(e instanceof Date)return t.output==="timestamp"?e.getTime():e.toISOString();if(typeof e=="number"){const r=new Date(e<1e12?e*1e3:e);if(isNaN(r.getTime()))throw new b(e,t,new Error("Invalid date from number"));return t.output==="timestamp"?r.getTime():r.toISOString()}if(typeof e=="string"){const r=new Date(e);if(isNaN(r.getTime()))throw new b(e,t,new Error("Invalid date from string"));return t.output==="timestamp"?r.getTime():r.toISOString()}throw new b(e,t,new Error("Unsupported date type"))}catch(r){throw r instanceof b?r:new b(e,t,r)}}static _relativeTime(e,t){const n=new Date-e,a=Math.floor(n/1e3),s=Math.floor(a/60),i=Math.floor(s/60),o=Math.floor(i/24);return a<60?"Just now":s<60?`${s} min ago`:i<24?`${i} hours ago`:o===1?"Yesterday":o<7?`${o} days ago`:e.toLocaleDateString(t.locale||"en-US")}static _formatCustom(e,t){const r={YYYY:e.getFullYear(),MM:String(e.getMonth()+1).padStart(2,"0"),DD:String(e.getDate()).padStart(2,"0"),HH:String(e.getHours()).padStart(2,"0"),mm:String(e.getMinutes()).padStart(2,"0"),ss:String(e.getSeconds()).padStart(2,"0")};return t.replace(/YYYY|MM|DD|HH|mm|ss/g,n=>r[n])}}class S extends y{constructor(e,t={},r=null){super("TimestampPipe",e,t,r),this.name="TimestampPipeParseError"}}class B{static humanize(e,t={}){if(e==null)return t.default||"";let r;try{if(e instanceof Date)r=e.getTime();else if(typeof e=="number")r=e<1e12?e*1e3:e;else if(typeof e=="string")r=this._parseTimestampString(e);else return t.default||"";if(!this._isValidTimestamp(r))return t.default||""}catch(a){throw a instanceof S?a:new S(e,"timestamp",t,a)}switch(t.format||"relative"){case"relative":return this._relativeTime(r,t);case"absolute":return this._absoluteTime(r,t);case"timeago":return this._timeAgo(r,t);case"calendar":return this._calendarTime(r,t);case"since":return this._timeSince(r,t);case"custom":return this._formatCustom(r,t.pattern,t);default:return this._defaultFormat(r,t)}}static normalize(e,t={}){if(e==null)return t.default!==void 0?t.default:t.useCurrent!==!1?Date.now():null;let r;try{if(e instanceof Date)r=e.getTime();else if(typeof e=="number")r=e<1e12?e*1e3:e;else if(typeof e=="string")r=this._parseTimestampString(e);else throw new S(e,"timestamp",t);if(!this._isValidTimestamp(r))throw new S(e,"timestamp",t)}catch(n){throw n instanceof S?n:new S(e,"timestamp",t,n)}return t.precision&&(r=this._applyPrecision(r,t.precision)),t.timezone&&(r=this._adjustTimezone(r,t.timezone)),t.output==="seconds"?Math.floor(r/1e3):r}static _parseTimestampString(e){const t=Date.parse(e);if(!isNaN(t))return t;const r=[/^(\d{1,2})\/(\d{1,2})\/(\d{4}) (\d{1,2}):(\d{2}):(\d{2})$/,/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{2}):(\d{2})$/];for(const n of r){const a=e.match(n);if(a)return new Date(parseInt(a[3]||a[1]),parseInt(a[1]||a[2])-1,parseInt(a[2]||a[3]),parseInt(a[4]),parseInt(a[5]),parseInt(a[6])).getTime()}if(/^\d+$/.test(e)){const n=parseInt(e);return n<1e12?n*1e3:n}throw new S(e,"timestamp",{},new Error("Unable to parse timestamp string"))}static _isValidTimestamp(e){return typeof e=="number"&&!isNaN(e)&&e>0&&e<864e13}static _applyPrecision(e,t){const r=new Date(e);switch(t){case"second":r.setMilliseconds(0);break;case"minute":r.setSeconds(0,0);break;case"hour":r.setMinutes(0,0,0);break;case"day":r.setHours(0,0,0,0);break;case"month":r.setDate(1),r.setHours(0,0,0,0);break;case"year":r.setMonth(0,1),r.setHours(0,0,0,0);break}return r.getTime()}static _adjustTimezone(e,t){return typeof t=="number"?e+t*36e5:e}static _relativeTime(e,t){const n=Date.now()-e,a=Math.abs(n),s=[{label:"años",labelSingular:"año",milliseconds:31536e6},{label:"meses",labelSingular:"mes",milliseconds:2592e6},{label:"semanas",labelSingular:"semana",milliseconds:6048e5},{label:"días",labelSingular:"día",milliseconds:864e5},{label:"horas",labelSingular:"hora",milliseconds:36e5},{label:"minutos",labelSingular:"minuto",milliseconds:6e4},{label:"segundos",labelSingular:"segundo",milliseconds:1e3}];for(const i of s){const o=Math.floor(a/i.milliseconds);if(o>=1){const l=o===1?i.labelSingular:i.label;if(t.compact){const u=i.labelSingular.charAt(0);return n<0?`en ${o}${u}`:`Hace ${o}${u}`}return n<0?`en ${o} ${l}`:`Hace ${o} ${l}`}}return n<0?"pronto":"ahora mismo"}static _absoluteTime(e,t){const r=new Date(e),n=t.locale||"es-ES";return t.compact?r.toLocaleDateString(n,{month:"short",day:"numeric",year:e<new Date().getTime()-31536e6?"numeric":void 0}):r.toLocaleString(n,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:t.hour12!==!1})}static _timeAgo(e,t){const n=Date.now()-e;if(n<6e4)return"Hace un momento";if(n<36e5){const s=Math.floor(n/6e4);return s===1?"Hace 1 minuto":`Hace ${s} minutos`}if(n<864e5){const s=Math.floor(n/36e5);return s===1?"Hace 1 hora":`Hace ${s} horas`}return new Date(e).toLocaleDateString(t.locale||"es-ES",{month:"short",day:"numeric"})}static _calendarTime(e,t){const r=new Date(e),n=new Date,a=new Date(n);a.setDate(a.getDate()-1);const s=new Date(n);s.setDate(s.getDate()+1);const i=r.toDateString()===n.toDateString(),o=r.toDateString()===a.toDateString(),c=r.toDateString()===s.toDateString(),l=r.toLocaleTimeString(t.locale||"es-ES",{hour:"numeric",minute:"2-digit",hour12:t.hour12!==!1});return i?`Hoy a las ${l}`:o?`Ayer a las ${l}`:c?`Mañana a las ${l}`:r.toLocaleDateString(t.locale||"es-ES",{weekday:"short",month:"short",day:"numeric",year:e<new Date().getTime()-31536e6?"numeric":void 0})}static _timeSince(e){const r=Date.now()-e;if(r<0)return"en el futuro";const n=Math.floor(r/1e3),a=Math.floor(n/60),s=Math.floor(a/60),i=Math.floor(s/24);if(i>0){const c=i===1?"día":"días",l=s%24===1?"hora":"horas";return`Hace ${i} ${c} ${s%24} ${l}`}if(s>0){const c=s===1?"hora":"horas",l=a%60===1?"minuto":"minutos";return`Hace ${s} ${c} ${a%60} ${l}`}if(a>0){const c=a===1?"minuto":"minutos",l=n%60===1?"segundo":"segundos";return`Hace ${a} ${c} ${n%60} ${l}`}return`Hace ${n} ${n===1?"segundo":"segundos"}`}static _formatCustom(e,t){const r=new Date(e),n={YYYY:r.getFullYear(),YY:String(r.getFullYear()).slice(-2),MM:String(r.getMonth()+1).padStart(2,"0"),M:r.getMonth()+1,DD:String(r.getDate()).padStart(2,"0"),D:r.getDate(),HH:String(r.getHours()).padStart(2,"0"),H:r.getHours(),mm:String(r.getMinutes()).padStart(2,"0"),m:r.getMinutes(),ss:String(r.getSeconds()).padStart(2,"0"),s:r.getSeconds(),SSS:String(r.getMilliseconds()).padStart(3,"0"),A:r.getHours()>=12?"PM":"AM",a:r.getHours()>=12?"pm":"am"};return t.replace(/YYYY|YY|MM|M|DD|D|HH|H|mm|m|ss|s|SSS|A|a/g,a=>n[a])}static _defaultFormat(e,t){const r=new Date(e);return t.output==="seconds"?Math.floor(e/1e3).toString():t.output==="iso"?r.toISOString():t.output==="locale"?r.toLocaleString(t.locale||"es-ES"):e.toString()}}class x{static pipes={string:R,number:Y,boolean:U,date:V,timestamp:B};static humanize(e,t,r={}){const n=this.pipes[t];return n?n.humanize(e,r):(console.warn(`No pipe found for type: ${t}`),e)}static normalize(e,t,r={}){const n=this.pipes[t];return n?n.normalize(e,r):(console.warn(`No pipe found for type: ${t}`),e)}static humanizeObject(e,t,r={}){const n={};for(const[a,s]of Object.entries(t))if(e[a]!==void 0){const i={...s,...r[a]};n[a]=this.humanize(e[a],s.type,i)}return n}static normalizeObject(e,t,r={}){const n={};for(const[a,s]of Object.entries(t))if(e[a]!==void 0){const i={...s,...r[a]};n[a]=this.normalize(e[a],s.type,i)}return n}}class f{constructor({schema:e={},scopes:t={},pipes:r={}}={}){if(!e||typeof e!="object")throw new TypeError("Contract schema must be an object.");this.schema=e,this.scopes=t,this.pipes=r}getPrimaryKey(){const e=["id","ID",`${this.constructor.name.replace("Contract","").toLowerCase()}ID`];for(const t of e)if(this.schema[t])return t;return Object.keys(this.schema)[0]}static _toMs(e){if(e instanceof Date)return e.getTime();if(typeof e=="number"&&Number.isFinite(e))return e<1e12?e*1e3:e;if(typeof e=="string"){const t=Date.parse(e);return Number.isNaN(t)?NaN:t}return NaN}static types={string:(e={})=>({type:"string",...e}),number:(e={})=>({type:"number",...e}),boolean:(e={})=>({type:"boolean",...e}),enum:(e,t={})=>({type:"enum",values:e,...t}),date:(e={})=>({type:"date",...e}),timestamp:(e={})=>({type:"timestamp",...e})};_validateFieldWithPipes(e,t,r){const n=[];if(r.required&&(t==null||t===""))return n.push(`${e} is required`),n;if(t==null||t==="")return n;try{const a=x.normalize(t,r.type,r);switch(r.type){case"string":if(typeof a!="string"){n.push(`${e} must be a string`);break}r.min&&a.length<r.min&&n.push(`${e} must be at least ${r.min} characters`),r.max&&a.length>r.max&&n.push(`${e} must be at most ${r.max} characters`),r.regex&&!r.regex.test(a)&&n.push(`${e} format is invalid`);break;case"number":if(typeof a!="number"||Number.isNaN(a)){n.push(`${e} must be a number`);break}r.min!==void 0&&a<r.min&&n.push(`${e} must be >= ${r.min}`),r.max!==void 0&&a>r.max&&n.push(`${e} must be <= ${r.max}`);break;case"boolean":typeof a!="boolean"&&n.push(`${e} must be a boolean`);break;case"enum":r.values?.includes(a)||n.push(`${e} must be one of: ${r.values.join(", ")}`);break;case"date":case"timestamp":{const s=f._toMs(a);if(Number.isNaN(s)){n.push(`${e} must be a valid date/timestamp`);break}if(r.min!==void 0){const i=f._toMs(r.min);(!Number.isFinite(i)||s<i)&&n.push(`${e} must be >= ${r.min}`)}if(r.max!==void 0){const i=f._toMs(r.max);(!Number.isFinite(i)||s>i)&&n.push(`${e} must be <= ${r.max}`)}break}default:n.push(`${e} has unknown type ${r.type}`)}}catch(a){a instanceof y?n.push(`${e} ${a.message}`):n.push(`${e} failed pipe validation: ${a.message}`)}return n}_validateField(e,t,r){if(r.type&&x.pipes[r.type])return this._validateFieldWithPipes(e,t,r);const n=[];if(r.required&&(t==null||t===""))return n.push(`${e} is required`),n;if(t==null||t==="")return n;switch(r.type){case"string":if(typeof t!="string"){n.push(`${e} must be a string`);break}r.min&&t.length<r.min&&n.push(`${e} must be at least ${r.min} characters`),r.max&&t.length>r.max&&n.push(`${e} must be at most ${r.max} characters`),r.regex&&!r.regex.test(t)&&n.push(`${e} format is invalid`);break;case"number":if(typeof t!="number"||Number.isNaN(t)){n.push(`${e} must be a number`);break}r.min!==void 0&&t<r.min&&n.push(`${e} must be >= ${r.min}`),r.max!==void 0&&t>r.max&&n.push(`${e} must be <= ${r.max}`);break;case"boolean":typeof t!="boolean"&&n.push(`${e} must be a boolean`);break;case"enum":r.values?.includes(t)||n.push(`${e} must be one of: ${r.values.join(", ")}`);break;case"date":case"timestamp":{const a=f._toMs(t);if(Number.isNaN(a)){n.push(`${e} must be a valid date/timestamp`);break}if(r.min!==void 0){const s=f._toMs(r.min);(!Number.isFinite(s)||a<s)&&n.push(`${e} must be >= ${r.min}`)}if(r.max!==void 0){const s=f._toMs(r.max);(!Number.isFinite(s)||a>s)&&n.push(`${e} must be <= ${r.max}`)}break}default:n.push(`${e} has unknown type ${r.type}`)}return n}parse(e,t,{usePipes:r=!0}={}){if(!e||typeof e!="object")throw new TypeError("Contract.parse requires an object");let n=this.schema;if(t){if(!this.scopes||!this.scopes[t])throw new _(t);n=Object.fromEntries(this.scopes[t].map(i=>[i,this.schema[i]]))}const a={},s={};for(const[i,o]of Object.entries(n)){let c=e[i];if((c==null||c==="")&&o.default!==void 0&&(c=typeof o.default=="function"?o.default():o.default),r&&o.type&&c!==void 0&&c!==null)try{c=x.normalize(c,o.type,o)}catch(u){s[i]=[`Pipe normalization failed: ${u.message}`];continue}o.trim&&typeof c=="string"&&(c=c.trim());const l=this._validateField(i,c,o);l.length>0?s[i]=l:c!==void 0&&(a[i]=c)}if(Object.keys(s).length>0)throw new M(s);return a}humanize(e,t){const r=this.parse(e,t,{usePipes:!1}),n={};for(const[a,s]of Object.entries(r)){const i=this.schema[a];if(i&&i.type)try{n[a]=x.humanize(s,i.type,{...i,...this.pipes[a]})}catch(o){n[a]=s,console.warn(`Failed to humanize field ${a}:`,o)}else n[a]=s}return n}validateWithPipes(e,t){const r={},n={};let a=this.schema;if(t){if(!this.scopes||!this.scopes[t])throw new _(t);a=Object.fromEntries(this.scopes[t].map(s=>[s,this.schema[s]]))}for(const[s,i]of Object.entries(a)){let o=e[s];if((o==null||o==="")&&i.default!==void 0&&(o=typeof i.default=="function"?i.default():i.default),i.required&&(o==null||o==="")){r[s]=[`${s} is required`];continue}if(!(o==null||o===""))try{const c=x.normalize(o,i.type,i);n[s]=c,i.type==="string"&&i.min&&c.length<i.min&&(r[s]=[`${s} must be at least ${i.min} characters`]),i.type==="string"&&i.max&&c.length>i.max&&(r[s]=[`${s} must be at most ${i.max} characters`]),i.regex&&!i.regex.test(c)&&(r[s]=[`${s} format is invalid`])}catch(c){r[s]=[`${s} validation failed: ${c.message}`]}}if(Object.keys(r).length>0)throw new M(r);return n}describe(e){if(e){if(!this.scopes||!this.scopes[e])throw new _(e);return this.scopes[e]}return this.schema}}class Z extends f{constructor(){super({schema:{email:f.types.string({required:!0,trim:!0,regex:/^[A-Za-z0-9.]+@[A-Za-z0-9.]+\.(?:[A-Za-z]{2,}|edu\.sv)$/,default:""}),contrasena:f.types.string({required:!0,min:8,max:256,regex:/^[A-Za-z0-9#!@&]+$/,default:""}),userID:f.types.string({required:!0,trim:!0,default:""}),roleID:f.types.string({required:!0,default:""}),firstName:f.types.string({required:!0,trim:!0,default:""}),lastName:f.types.string({required:!0,trim:!0,default:""}),birthdate:f.types.string({required:!1,default:""}),contactEmail:f.types.string({required:!1,trim:!0,regex:/^[A-Za-z0-9.]+@[A-Za-z0-9.]+\.(?:[A-Za-z]{2,}|edu\.sv)$/,default:""}),phone:f.types.string({required:!1,trim:!0,regex:/^[0-9+\- ]*$/,default:""})},scopes:{login:["email","contrasena"],me:["userID","email","roleID","firstName","lastName","birthdate","contactEmail","phone"]}})}}class L extends q{static baseEndpoint="/Auth";static contract=new Z;static async login(e,t){return await this.postRaw("login",{email:e,contrasena:t},"login"),!0}static async me(){return await this.get("me",null,null,"me")}static async logout(){return await this.postRaw("logout"),!0}}class h{static async isAuthenticated(){if(window.location.hash!=="#login"&&window.location.hash!=="#not-found")try{return await L.me()!==null}catch(e){return console.error("AuthGuard.isAuthenticated error:",e),!1}}static async authLogin(){try{return await L.me()!==null}catch(e){return console.error("AuthGuard.authLogin error:",e),!1}}static async ensureAuth(e="#login"){return await h.isAuthenticated()?!0:(window.location.hash=e,!1)}static isAdmin(){return h._user?.roleName==="Administrador"}static isStudent(){return h._user?.roleName==="Estudiante"}static isTeacher(){return h._user?.roleName==="Docente"}static isRA(){return h._user?.roleName==="Registro Académico"}static isRH(){return h._user?.roleName==="Recursos Humanos"}}document.addEventListener("DOMContentLoaded",async()=>{const{Body:m}=await import(F.components.layout.body.js);await new m;const{Footer:e}=await import(F.components.layout.footer.js);await new e;const{Toast:t}=await import(F.components.overlay.toast.js);await new t().init(),await h.isAuthenticated()||(window.location.hash="#login"),z.loadTheme(),A()});function k(m){const e=[];for(const t of Object.values(m))t?.hash?e.push(t):typeof t=="object"&&e.push(...k(t));return e}const G=k(F.views);async function A(m=window.location.hash||"#main"){const e=G.find(t=>t.hash===m);if(!e){window.location.hash="#not-found";return}if(e.hash!=="#login"&&e.hash!=="#not-found"){if(!await h.isAuthenticated()){window.location.hash="#login";return}if(e.guard==="admin"&&!h.isAdmin()){window.location.hash="#main";return}}if(e.hideNavbar){const t=document.querySelector("#navbar");t&&(t.innerHTML="")}else{const{Navbar:t}=await import(F.components.layout.navbar.js);await new t;const r=document.querySelector("#burger-btn"),n=document.querySelector("#sidebar-wrapper");r&&n&&r.addEventListener("click",()=>{n.classList.toggle("-translate-x-full")})}try{const t=await fetch(e.file);if(!t.ok){console.error(`Failed to load ${e.file}`,t.status),window.location.hash="#not-found";return}const r=await t.text();document.querySelector("#main-view").innerHTML=r,document.title=e.title}catch(t){console.error("View fetch error",t),window.location.hash="#not-found";return}try{const t=e.file.replace(/\.html$/,".js"),r=await import(new URL(t,import.meta.url).href);r.init&&await r.init()}catch(t){console.warn("No logic found for",m,t)}}window.addEventListener("hashchange",()=>{z.loadTheme(),A()});window.location.hash||(window.location.hash="#main");
